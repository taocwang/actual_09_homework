<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <title>用户创建</title>
<<<<<<< HEAD
      <link rel="icon" href="/static/favicon.ico">
=======
      <link rel="icon" href="/static/temp/favicon.ico">
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
       <link rel="stylesheet" href="{{url_for('static',filename='css/bootstrap.min.css')}}"  type="text/css" />
      <link rel="stylesheet" href="{{url_for('static',filename='css/main.css')}}"  type="text/css" />
      <link rel="stylesheet" href="{{url_for('static',filename='css/jquery.dataTables.css')}}"  type="text/css" />
  </head>

  <body>
<<<<<<< HEAD
=======
  <!--导航条-->
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">某某系统</a>
        </div>
<<<<<<< HEAD
=======

   <!--最右边导航条-->
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/logout/">退出登录</a></li>
          </ul>
        </div>
      </div>
    </nav>
<<<<<<< HEAD
=======

  <!--页面主体，流式布局类2，适用于100%宽度，占据全部视口（viewport）的容器 -->
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
         <li class="active"><a href="/users/">用户管理<span class="sr-only"></span></a></li>
           <li class="inactive" ><a href="/user/create/" id="link" >添加用户<span class="sr-only"></span></a></li>
           <li class="inactive"><a href="/user/modifypasswd/">修改密码<span class="sr-only"></span></a></li>
           <!--li class="inactive"><a href="/user/finduser/">查询用户<span class="sr-only"></span></a></li-->
           <li class="active"><a href="/user/logs/">日志查询<span class="sr-only"></span></a></li>
           <li class="active"><a href="/user/upload/">文件上传<span class="sr-only"></span></a> </li>
          </ul>
        </div>

<<<<<<< HEAD
=======
  <!--偏移2列，主体内容部分 -->
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
           <hr />
           <button type="button" id="btn" class="btn btn-primary" data-toggle="modal" data-target="#add-user" data-username="{{username}}" data-password="{{password}}" data-age="{{age}}">添加用户</button>

         <div class="modal fade" id="add-user" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="exampleModalLabel">添加用户</h4>
      </div>
      <div class="modal-body">
<<<<<<< HEAD
=======

   <!--弹出框表单部分 -->
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
        <form>
              {# <input type="hidden" id="password-userid"/> #}
              <div class="form-group">
                <label for="user-username" class="control-label">用户名</label>
                <input type="text" class="form-control" id="user-username">
              </div>
              <div class="form-group">
                <label for="user-password" class="control-label">密码</label>
                <input type="password" class="form-control" id="user-password">
              </div>
              <div class="form-group">
                <label for="user-age" class="control-label">年龄</label>
                <input type="text" class="form-control" id="user-age">
              </div>
            </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
        <button type="button" class="btn btn-primary" id="useradd-commit">添加</button>
      </div>
    </div>
    </div>
    </div>

<<<<<<< HEAD

          <!--form action="/user/add/" method="post" ENCTYPE="multipart/form-data">
             <div style='text-align:center;color:red;font-size:20px' class="bg-danger">{{error}}</div>
            用户名: <input type="text" name="username" value="{{username}}" />
            密码: <input type="text" name="password" value="{{password}}" />
            年龄: <input type="text" name="age" value="{{age}}" />
            <input type="submit" class="btn btn-info" value="添加" />
            <input type="button" class="btn btn-info" value="返回" onclick="javascript:history.back();"/>
            </form -->


=======
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery-1.12.4.js')}}" ></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery-1.10.2.min.js')}}" ></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/bootstrap.min.js')}}" ></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery.dataTables.js')}}" ></script>

     <script type="text/javascript">
//       document.getElementById("link").onclick=function(){
// 　　   document.getElementById("btn").click();
//     }
      //显示框框
     jQuery(document).ready(function() {
        jQuery('#update-password').on('show.bs.modal', function (event) {
       //show.bs.modal调用之后立即触发该事件。如果是通过点击某个作为触发器的元素，则此元素可以通过事件的 relatedTarget 属性进行访问。
        var button = jQuery(event.relatedTarget);  //触发button
        var username = button.data('username');   //通过button获取用户名
        var password = button.data('password');       //通过button获取用户password
        var age = button.data('age');       //通过button获取用户age
        jQuery('#user-username').val(username);   //设置id=user-username的值为从button获取的username
        jQuery('#user-password').val(password); //设置id=user-password值为从button获取的password
        jQuery('#user-age').val(age);
              });

    //点击提交动作
    jQuery('#useradd-commit').on('click', function(){
      //id为password-commit的控件触发后，执行操作
        var params = {};
        params['username'] = jQuery('#user-username').val();  //获取id=password-userid的值
        params['password'] = jQuery('#user-password').val(); //获取id=password-manager-password的值
        params['age'] = jQuery('#user-age').val(); //获取id=password-user-password的值
        console.log(params);  //控制台显示
        //通过ajax更新用户密码
        jQuery.post('/user/add/',
            params,
            function(data) {
              if(data['is_ok']){
                alert('添加用户成功');
                jQuery('#add-user').modal('hide');   //更新成功后，自动消失框框
                //window.location.replace('/users/');
                //window.location.reload();
              } else {
                alert(data['error']);
              }
            },
            'json'
        );
    });

          });

    </script>
<<<<<<< HEAD


=======
>>>>>>> f5947768a61fa20e516dfeeead8bd726e9c8250e
       </div>
      </div>
    </div>
  </body>
</html>
